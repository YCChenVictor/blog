<!DOCTYPE html>
<html lang="en-US">
  <head><div id="endpoint" class="hidden">https://ycchenvictor.github.io</div>
<div id="base" class="hidden">/blog</div>
<!-- 3D drawing -->
    
    <!-- 2D drawing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>

<script src='/implement_p5.js'></script>

    <!-- for mathjax support -->
    
    <!-- mermaid --><script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.6/mermaid.min.js"></script>
<script>
  const config = {
    theme: 'neutral',
    startOnLoad:true,
    htmlLabels:true,
  };
  mermaid.initialize(config);
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="/blog/assets/css/main.css">
    <script src="https://kit.fontawesome.com/f9271f6bdd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="font-mono list-disc">
    <div class="pt-12 pb-4">
      
        <nav class="flex flex-wrap items-center justify-center px-2 mb-6">
  <div class="flex">
    <div class="flex absolute left-0 top-0">
      <img class="object-cover mx-auto h-36 w-36 rounded-full" src="/blog/assets/img/title.jpeg"
        alt="author profile image">
    </div>
    <div class="container px-4 mx-auto flex flex-wrap items-center justify-center">
      <div class="w-full relative flex justify-center">
        <button type="button" onclick="toggleNavbar('navbar')"
          class="rounded-md inline-flex items-center justify-center text-gray-500 md:hidden"
          aria-expanded="false">
          <span class="sr-only">Open menu</span>
          <!-- Heroicon name: outline/menu -->
          <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <div class="absolute right-16 flex hidden md:block" id="navbar">
        <div class="flex flex-col md:flex-row mr-auto w-full">
           <!-- don't show Home in menu for Homepage -->
            <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
              href="/blog/">
              Home
            </a>
          

        <!-- dynamic menu based on navigation info in _config.yml -->
        
           <!-- don't show current page in menu -->
            <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
              href="/blog/about">
              About
            </a>
          
        
           <!-- don't show current page in menu -->
            <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
              href="/blog/category">
              Category
            </a>
          
        
        </div>
      </div>
    </div>
  </div>
</nav>

      
      
  <div id="sidebar" class="pt-24 pl-4 fixed"></div>
  <div id="burger-sidebar" class="pt-24 pl-4 fixed"></div>

<div class="p-16 prose prose-indigo">
  <h1 class="text-center mt-6 mb-6">decorator</h1>
  <div class="text-center">
    
  </div>
  <div class="md:px-4 md:grid lg:px-72">
    <h2 id="introduction">Introduction</h2>

<p>To change the behavior of a class without rewriting the code of the class by wrap the class with a class.</p>

<div id="concept" class="h-screen justify-center items-center">
  <div id="concept toggle" class=""></div>
  <div id="concept canvas" class="border"></div>
</div>

<script>
  const imagePath = '/assets/img/decorator_concept.png'
  const conceptDiv = document.getElementById('concept');
  const conceptWidth = conceptDiv.offsetWidth;
  let eraseEnable = false;
  let img;
  let photoGraph;

  function setup() {
    setupImage ()
    setupButton ()
    setupCanvas ()
    setupGraphics ()
  }

  function draw() {
    image(img, 0, 0, conceptWidth, 400);
    image(graphic, 0, 0)
  }

  function mouseDragged() {
    if (!eraseEnable) {
      graphic.fill('black');
      graphic.noStroke();
      graphic.ellipse(mouseX, mouseY, 5, 5);
    } else {
      graphic.fill('white');
      graphic.noStroke();
      graphic.ellipse(mouseX, mouseY, 10, 10);
    }
  }

  function keyTyped() {
    if (key === 's') {
      saveCanvas('decorator_concept.png');
    }
  }

  function setupImage () {
    try {
      img = loadImage(imagePath);
    }
    catch {
      img = createImage(conceptWidth, 400)
    }
  }

  function setupButton () {
    toggleButton = createButton('erase');
    toggleButton.parent('concept toggle');
    toggleButton.addClass("border rounded px-4");
    toggleButton.mouseClicked(ButtonClicked)
  }

  function setupCanvas () {
    const concept = createCanvas(conceptWidth, 400);
    concept.parent('concept canvas');
  }

  function setupGraphics () {
    graphic = createGraphics(conceptWidth, 400);
  }

  function ButtonClicked () {
    toggleStyle()
    toggleErase()
  }

  function toggleErase() {
    if (eraseEnable) {
      noErase();
      eraseEnable = false;
    }
    else {
      erase();
      eraseEnable = true;
    }
  }

  function toggleStyle() {
    toggleButton.toggleClass("bg-indigo-100");
    toggleButton.toggleClass("border");
  }
</script>

<h2 id="why">Why?</h2>

<p>Image your resturant serves lots of beverages and you want to design tables to store necessary information in your computer. Intuitively, there are two way: using inheritance or using polymorphism; however, inheritance creates lots of tables with duplicate methods and polymorphism creates multiple columns which is unnecessary for most other tables. To solve it, we use the concept of decorator which is to decorate the base class.</p>

<h2 id="how">How?</h2>

<p>The UML:</p>

<div class="mermaid">
classDiagram
  Beverage &lt;-- Espresso : is a
  Beverage &lt;-- Decaf : is a
  Beverage &lt;-- Decorator : is a &amp; has a
  Decorator &lt;-- SoyMilkDecorator : is a
  Decorator &lt;-- CaramelDecorator : is a

  Beverage : getDesc()
  Beverage : cost()

  Espresso : cost()
  Decaf : cost()

  Decorator : getDesc()
  SoyMilkDecorator : getDesc()
  SoyMilkDecorator : cost()
  CaramelDecorator : getDesc()
  CaramelDecorator : cost()
</div>

<p>For example, the cost of Espresso is 2 dollar and the cost of SoyMilkDecorator is 1 dollar, so I would expect that <code class="language-plaintext highlighter-rouge">espresso.cost = 2</code>, <code class="language-plaintext highlighter-rouge">SoyMilkDecorator.cost = 1</code>, <code class="language-plaintext highlighter-rouge">espresso_with_soymilk.cost = 3</code></p>

<h2 id="what">What?</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Beverage</span>
  <span class="k">def</span> <span class="nf">get_desc</span>
    <span class="k">raise</span> <span class="no">NotImplementedError</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2"> has not implemented method '</span><span class="si">#{</span><span class="n">__method__</span><span class="si">}</span><span class="s2">'"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">cost</span>
    <span class="k">raise</span> <span class="no">NotImplementedError</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2"> has not implemented method '</span><span class="si">#{</span><span class="n">__method__</span><span class="si">}</span><span class="s2">'"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Espresso</span> <span class="o">&lt;</span> <span class="no">Beverage</span>
  <span class="k">def</span> <span class="nf">get_desc</span>
    <span class="s1">'Espresso'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">cost</span>
    <span class="mi">2</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Decaf</span> <span class="o">&lt;</span> <span class="no">Beverage</span>
  <span class="k">def</span> <span class="nf">get_desc</span>
    <span class="s1">'Decaf'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">cost</span>
    <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Decorator</span> <span class="o">&lt;</span> <span class="no">Beverage</span>
  <span class="nb">attr_accessor</span> <span class="ss">:beverage</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">beverage</span><span class="p">)</span>
    <span class="vi">@beverage</span> <span class="o">=</span> <span class="n">beverage</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">get_desc</span>
    <span class="vi">@beverage</span><span class="p">.</span><span class="nf">get_desc</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">SoyMilkDecorator</span> <span class="o">&lt;</span> <span class="no">Decorator</span>
  <span class="k">def</span> <span class="nf">cost</span>
    <span class="vi">@beverage</span><span class="p">.</span><span class="nf">cost</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">CaramelDecorator</span> <span class="o">&lt;</span> <span class="no">Decorator</span>
  <span class="k">def</span> <span class="nf">cost</span>
    <span class="vi">@beverage</span><span class="p">.</span><span class="nf">cost</span> <span class="o">+</span> <span class="mi">3</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">espresso_with_soy_milk</span> <span class="o">=</span> <span class="no">SoyMilkDecorator</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">Espresso</span><span class="p">.</span><span class="nf">new</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">espresso_with_soy_milk</span><span class="p">.</span><span class="nf">cost</span> <span class="c1"># 3</span>
</code></pre></div></div>

<h2 id="reference">Reference</h2>

<p><a href="https://www.youtube.com/watch?v=GCraGHx6gso&amp;list=PLrhzvIcii6GNjpARdnO4ueTUAVR9eMBpc&amp;index=3">Decorator Pattern – Design Patterns (ep 3)</a></p>

<p><a href="https://refactoring.guru/design-patterns/decorator/ruby/example">Decorator in Ruby</a></p>

  </div>
</div>

<footer class="relative px-4 pt-4 pb-4">
  
  <!-- divider -->
  <div class="relative my-8">
    <div class="absolute inset-0 flex items-center" aria-hidden="true">
      <div class="w-full border-t border-gray-200"></div>
    </div>
    <div class="relative flex justify-center ">
      <span class="bg-white px-2 text-gray-200">
        <i class="text-xs far fa-square"></i>
      </span>
    </div>
  </div>

  <!-- footer msg -->
  <div class="flex flex-wrap items-center justify-center">
    <div class="text-sm text-gray-300">
      © <span id="get-current-year"></span>
      
      <a href="" class="!no-underline">
        
      </a>
      
    </div>
  </div>
  </div>
</footer>

      <button
        type="button"
        data-mdb-ripple="true"
        data-mdb-ripple-color="light"
        class="inline-block p-3 bg-red-600 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg transition duration-150 ease-in-out bottom-5 right-5 fixed"
        id="btn-back-to-top"
      >
        <svg aria-hidden="true" focusable="false" data-prefix="fas" class="w-4 h-4" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg>
      </button>
    </div>
  </body>

  <script>
    /* Function for getting the current year in the footer */
    (function () {
      if (document.getElementById("get-current-year")) {
        document.getElementById(
          "get-current-year"
        ).innerHTML = new Date().getFullYear();
      }
    })();
    /* Function for opening navbar on mobile */
    function toggleNavbar(collapseID) {
        document.getElementById(collapseID).classList.toggle("hidden");
        document.getElementById(collapseID).classList.toggle("block");
      }
    /* Function for dropdowns */
    function openDropdown(event, dropdownID) {
      let element = event.target;
      while (element.nodeName !== "A") {
        element = element.parentNode;
      }
      document.getElementById(dropdownID).classList.toggle("hidden");
      document.getElementById(dropdownID).classList.toggle("block");
    }

    // Get the button
    let myButton = document.getElementById("btn-back-to-top");
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
      scrollFunction();
    };
    function scrollFunction() {
      if (
        document.body.scrollTop > 20 ||
        document.documentElement.scrollTop > 20
      ) {
        myButton.style.display = "block";
      } else {
        myButton.style.display = "none";
      }
    }
    // When the user clicks on the button, scroll to the top of the document
    myButton.addEventListener("click", backToTop);
    function backToTop() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>

  <script type="text/javascript" src="/blog/assets/javascripts/bundle.js" charset="utf-8"></script>
</html>
