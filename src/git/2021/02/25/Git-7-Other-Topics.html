<h2 id="remove-private-information">Remove Private Information</h2>

<p><strong>After removing the private information from a file</strong> such that</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>password: 123
</code></pre></div></div>
<p>to</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>password: ENV["password"]
</code></pre></div></div>
<p>there are two method to solve this problem.</p>
<h3 id="first-method-delete-wholegitfile">First Method: delete whole .git file</h3>

<p>Although this method discard the whole history, it still works</p>

<h3 id="second-method-filter-branch">Second Method: filter-branch</h3>

<p>For example, if the private information exists in aaa.txt. We can</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git filter-branch --tree-filter "rm aaa.txt" HEAD
</code></pre></div></div>
<p>and then we can save this file with correct information again and commit it again. 
This command will remove all the aaa.txt file in each commit and the sha1 saved in refs in .git</p>

<p>If we regret the filter-branch process, we can use</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git reset refs/original/refs/heads/master --hard
</code></pre></div></div>
<p>It will recover the sha1 value before filter-branch</p>

<h3 id="how-to-truly-remove-a-file-fromgit">How to truly remove a file from git</h3>

<p>After filter-branch, we still can use refs to recover the file, so</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rm .git/refs/original/refs/heads/master
</code></pre></div></div>
<p>It removes this file, so that we cannot recover from it.</p>

<p>Then delete reflog, which stores all the commits sha-1 states</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git reflog expire --all --expire=now
</code></pre></div></div>
<p>The above code advances the expire date to now</p>

<p>Then delete all deleted commits with</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git gc --prune=now
</code></pre></div></div>
<p>Check any miscellaneous</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git fsck
</code></pre></div></div>
<p>If empty, then we are done</p>

<h1 id="to-be-continued">to be continued</h1>

<h3 id="what-if-we-want-commit-in-otherbranch">What if we want commit in other branch</h3>

<p>Given there are two branches, master and second, as follow</p>

<p><img src="/Users/chenyongzhe/coding/practice_not_for_github/javascript_practice/medium-to-markdown/medium-export/posts/md_1623056197395/img/1__ho8PO4iiDP9crllA__GvLdg.png" alt="" />
<img src="/Users/chenyongzhe/coding/practice_not_for_github/javascript_practice/medium-to-markdown/medium-export/posts/md_1623056197395/img/1__MQZVe8jzapH__gUXmxAv0__A.png" alt="" /></p>

<p>If we want to copy <code class="language-plaintext highlighter-rouge">217e18e</code> in second branch upon<code class="language-plaintext highlighter-rouge">7311241</code> in master, then in master branch, cherry-pick <code class="language-plaintext highlighter-rouge">217e18e</code></p>

<p>$ git cherry-pick 217e18e</p>

<p>and the commits in master</p>

<p><img src="/Users/chenyongzhe/coding/practice_not_for_github/javascript_practice/medium-to-markdown/medium-export/posts/md_1623056197395/img/1__x9aVsG4aqMcGxgsJezL8wg.png" alt="" /></p>

<h3 id="reference">Reference:</h3>

<p><a href="https://gitbook.tw/chapters/introduction/what-is-git.html" title="https://gitbook.tw/chapters/introduction/what-is-git.html"><strong>什麼是 Git？為什麼要學習它?</strong></a></p>
