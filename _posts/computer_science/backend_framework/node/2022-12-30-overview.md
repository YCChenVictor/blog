---
layout: post
title:
description: ''
date: '2022-12-30'
categories: node
note:
mathjax:
mermaid:
p5:
threeJS:
anchor:
publish: true
---

## Introduction

TBC

## Why?

TBC

## How?

### install

install node and PG

### src

```bash
mkdir my-project
cd my-project
npm init -y
```

### dependency

```bash
npm install express pg
```

### server

create `app.js` with

```js
const express = require('express')
const app = express()

app.get('/', (req, res) => {
  res.send('Hello World!')
})

app.listen(5000, () => {
  console.log('Server listening on port 5000')
})
```

and run it with `node server.js`

### routes (API)

create a directory, `routes/` with API going to be imported in `app.js`

For example, `routes/summary.js`

```javascript
module.exports = function(app) {
  app.get('/', (req, res) => {
    res.send('Hello World!')
  })
  app.post('/sign_up', (req, res) => {
    res.send('Hello World!')
  })
}
```

in `app.js`,

```javascript
...
const express = require('express')
const api = require('./routes_summary.js');
const app = express()

app.listen(5000, () => {
  api(app)
  ...
})
...
```

### database

[datatype]({{site.baseurl}}/node/2022/12/30/overview.html)

### CRUD

For example, we want to create tasks

Create `base.js` with

```javascript
const pg = require('pg')
const db = new new pg.Database('test.db');

module.exports = function(table) {
  db.run(`INSERT INTO ${table} (task) VALUES (?)`, task, function(err) {
    if (err) {
      res.sendStatus(500);
    } else {
      res.sendStatus(201);
    }
  });
  ...
}
```

and inherit it in `task.js`

```javascript
// implement CRUD
```

### sign up and login mechanism

[sign up and login]({{site.baseurl}}/node/2022/12/31/sign-up-and-login.html)

### spec

[spec]()

## What?

place the task github url

and test it with

postman

## Reference

[How to organize routes in Nodejs Express app](https://stackoverflow.com/questions/59681974/how-to-organize-routes-in-nodejs-express-app)
