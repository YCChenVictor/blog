<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- 3D drawing -->
    
    <!-- 2D drawing -->
    
    <!-- for mathjax support -->
    
    <!-- mermaid --><meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="/blog/assets/css/main.css">
    <script src="https://kit.fontawesome.com/f9271f6bdd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="font-mono list-disc">
    <div class="pt-12 pb-4">
      
        <nav class="flex flex-wrap items-center justify-center px-2 mb-6">
  <div class="flex">
    <div class="flex absolute left-0 top-0">
      <img class="object-cover mx-auto h-36 w-36 rounded-full" src="/blog/assets/img/title.jpeg"
        alt="author profile image">
    </div>
    <div class="container px-4 mx-auto flex flex-wrap items-center justify-center">
      <div class="w-full relative flex justify-center">
        <button type="button" onclick="toggleNavbar('navbar')"
          class="rounded-md inline-flex items-center justify-center text-gray-500 md:hidden"
          aria-expanded="false">
          <span class="sr-only">Open menu</span>
          <!-- Heroicon name: outline/menu -->
          <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <div class="absolute right-16 flex hidden md:block" id="navbar">
        <div class="flex flex-col md:flex-row mr-auto w-full">
           <!-- don't show Home in menu for Homepage -->
          <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
            href="/blog/">
            Home
          </a>
          

        <!-- dynamic menu based on navigation info in _config.yml -->
        
           <!-- don't show current page in menu -->
          <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
            href="/blog/about">
            About
          </a>
          
        
           <!-- don't show current page in menu -->
          <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
            href="/blog/category">
            Category
          </a>
          
        
        </div>
      </div>
    </div>
  </div>
</nav>

      
      
  <div id="sidebar" class="pt-24 pl-4 fixed"></div>

<div class="p-16 prose prose-indigo">
  <h1 class="text-center mt-6 mb-6">Overview</h1>
  <div class="text-center">
    
  </div>
  <div class="px-72">
    <h2 id="introduction">Introduction</h2>

<p>By OWASP, the top 10 attack methods:</p>

<ul>
  <li>Injection: Injection attacks occur when untrusted data is sent to an interpreter as part of a command or query.</li>
  <li>Broken Authentication and Session Management: This covers a range of security issues related to user authentication and session management, including weak passwords, session hijacking, and broken logout functionality.</li>
  <li>Cross-Site Scripting (XSS): XSS attacks allow an attacker to inject malicious code into a web page viewed by other users.</li>
  <li>Broken Access Control: This includes security issues related to controlling access to resources, such as unauthorized access to sensitive data or functionality.</li>
  <li>Security Misconfiguration: This covers a range of security issues related to misconfigured web servers, applications, and frameworks.</li>
  <li>Sensitive Data Exposure: This refers to the exposure of sensitive information, such as passwords, credit card numbers, and other personal data, through inadequate encryption or storage practices.</li>
  <li>Insufficient Logging and Monitoring: This covers a range of security issues related to the lack of proper logging and monitoring, which can make it difficult to detect and respond to security incidents.</li>
  <li>Cross-Site Request Forgery (CSRF): CSRF attacks trick a user into performing actions on a website without their knowledge or consent.</li>
  <li>Using Components with Known Vulnerabilities: This refers to the use of third-party components, such as libraries and frameworks, that have known security vulnerabilities.</li>
  <li>Insufficient Authorization and Authentication: This covers a range of security issues related to ensuring that users are properly authenticated and authorized to access sensitive data or functionality.</li>
</ul>

<h2 id="why">Why?</h2>

<p>Prevent malware</p>

<h2 id="how">How?</h2>

<p>This section will explain the mechanisms of each attack so that we can have deeper understanding about how to solve it in what section.</p>

<h3 id="injection-flaws">injection flaws</h3>

<p>injection flaws: Attacks server side. Attacker injects SQL commands to a webpage through legal inputs and server runs it and get sick; for example, remove data stored in database.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">to</span> <span class="nx">be</span> <span class="nx">continued</span>
</code></pre></div></div>

<h3 id="cross-site-scripting-xss">cross site scripting (XSS)</h3>

<p>to be continued, going to show how to do XSS</p>

<h3 id="broken-access-control">Broken Access Control</h3>

<p>to be continued</p>

<h3 id="security-misconfiguration">Security Misconfiguration</h3>

<p>to be continued</p>

<h3 id="sensitive-data-exposure">Sensitive Data Exposure</h3>

<p>to be continued</p>

<h3 id="insufficient-logging-and-monitoring">Insufficient Logging and Monitoring</h3>

<p>to be continued</p>

<h3 id="cross-site-request-forgery-csrf">Cross Site Request Forgery (CSRF)</h3>

<p>CSRF is a type of attack that allows a malicious website to perform actions on behalf of a user who is logged into a different website. For example, an attacker could trick a user into clicking a link that submits a form to their bank’s website, transferring money to the attacker’s account. To prevent CSRF attacks, web applications often use a token that is attached to each form submission and checked on the server to ensure that the request is coming from the same site that generated the form.</p>

<p>Attackers can hide malware in seeable places for logged-in users, who have sessions and is authenticated, to click it and then sent unwanted requests to server with the session in cookie.</p>

<p>Solutions:</p>

<ul>
  <li>Synchronizer Token Pattern: This method adds a unique token to each HTTP request, which the server then verifies before processing the request.</li>
  <li>Same-Site Cookies: This method sets the SameSite attribute of a cookie, which tells the browser to only send the cookie with requests made on the same website.</li>
  <li>Double Submit Cookies: This method adds a unique token to both the cookie and the form data, and then verifies that they match on the server.</li>
  <li>Recaptcha v3</li>
  <li>Use of frameworks that have built-in CSRF protection mechanisms.</li>
</ul>

<h3 id="insufficient-authorization-and-authentication">Insufficient Authorization and Authentication</h3>

<p>insecure direct object reference: Attackers can get information by changing parameters sent to server. To solve it, we use session in cookie to store currently logged-in user and only response the data related to this user.</p>

<h2 id="what">What?</h2>

<h3 id="xss">XSS</h3>

<p>solve it with CORS</p>

<p>CORS helps to prevent cross-site scripting (XSS) attacks and provides a secure mechanism for sharing resources between different domains. Without CORS, a web application running on one domain would not be able to access resources or data on another domain, even if the user has authorized the request. This can limit the functionality and interoperability of web applications and prevent the sharing of data between sites.</p>

<h3 id="csrf">CSRF</h3>

<p>I want to use the <a href="/blog/api/2022/08/17/authentication.html#jwt">concept of JWT</a> because JWT check token on each request, which naturally prevent CSRF. However, it may encounter XSS because now the token is accessible on frontend. But react itself can prevent it.</p>

<p>With the JWT design, we can disable CORS checks as follow in node</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Website you wish to allow to connect</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Origin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">http://localhost:3000</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// Request methods you wish to allow</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Methods</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">GET, POST, OPTIONS, PUT, PATCH, DELETE</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// Request headers you wish to allow</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Headers</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">X-Requested-With,content-type</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// Set to true if you need the website to include cookies in the requests sent to the API (e.g. in case you use sessions)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Credentials</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">// Pass to next layer of middleware</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="reference">Reference</h2>

<p><a href="https://www.gss.com.tw/eis/59-eis48/290-owasp-top10">OWASP十大網路應用系統安全弱點說明</a></p>

<p><a href="https://www.youtube.com/watch?v=hExRDVZHhig">SSL, TLS, HTTP, HTTPS Explained</a></p>

<p><a href="https://www.youtube.com/watch?v=EoaDgUgS6QA">Cross-Site Scripting (XSS) Explained</a></p>

<p><a href="https://www.youtube.com/watch?v=rWHvp7rUka8">2017 OWASP Top 10: Injection Attacks</a></p>

<p><a href="https://www.stackhawk.com/blog/react-csrf-protection-guide-examples-and-how-to-enable-it/">React CSRF Protection Guide: Examples and How to Enable It</a></p>

<p><a href="https://security.stackexchange.com/questions/59411/how-to-protect-against-login-csrf">With anonymous cookies</a></p>

<p><a href="https://www.youtube.com/watch?v=b9WlsQMGWMQ">Registration and Login with JWT Authentication Tutorial - NodeJS Tutorial</a></p>

  </div>
</div>

<footer class="relative px-4 pt-4 pb-4">
  
  <!-- divider -->
  <div class="relative my-8">
    <div class="absolute inset-0 flex items-center" aria-hidden="true">
      <div class="w-full border-t border-gray-200"></div>
    </div>
    <div class="relative flex justify-center ">
      <span class="bg-white px-2 text-gray-200">
        <i class="text-xs far fa-square"></i>
      </span>
    </div>
  </div>

  <!-- footer msg -->
  <div class="flex flex-wrap items-center justify-center">
    <div class="text-sm text-gray-300">
      © <span id="get-current-year"></span>
      
      <a href="" class="!no-underline">
        
      </a>
      
    </div>
  </div>
  </div>
</footer>

      <button
        type="button"
        data-mdb-ripple="true"
        data-mdb-ripple-color="light"
        class="inline-block p-3 bg-red-600 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg transition duration-150 ease-in-out bottom-5 right-5 fixed"
        id="btn-back-to-top"
      >
        <svg aria-hidden="true" focusable="false" data-prefix="fas" class="w-4 h-4" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg>
      </button>
    </div>
  </body>

  <script>
    /* Function for getting the current year in the footer */
    (function () {
      if (document.getElementById("get-current-year")) {
        document.getElementById(
          "get-current-year"
        ).innerHTML = new Date().getFullYear();
      }
    })();
    /* Function for opening navbar on mobile */
    function toggleNavbar(collapseID) {
        document.getElementById(collapseID).classList.toggle("hidden");
        document.getElementById(collapseID).classList.toggle("block");
      }
    /* Function for dropdowns */
    function openDropdown(event, dropdownID) {
      let element = event.target;
      while (element.nodeName !== "A") {
        element = element.parentNode;
      }
      document.getElementById(dropdownID).classList.toggle("hidden");
      document.getElementById(dropdownID).classList.toggle("block");
    }

    // Get the button
    let myButton = document.getElementById("btn-back-to-top");
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
      scrollFunction();
    };
    function scrollFunction() {
      if (
        document.body.scrollTop > 20 ||
        document.documentElement.scrollTop > 20
      ) {
        myButton.style.display = "block";
      } else {
        myButton.style.display = "none";
      }
    }
    // When the user clicks on the button, scroll to the top of the document
    myButton.addEventListener("click", backToTop);
    function backToTop() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>

  <script type="text/javascript" src="/blog/assets/javascripts/bundle.js" charset="utf-8"></script>
</html>
