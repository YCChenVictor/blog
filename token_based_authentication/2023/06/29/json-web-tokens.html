<!DOCTYPE html>
<html lang="en-US">
  <head>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.6/mermaid.min.js"></script>
<script>
  const config = {
    theme: 'neutral',
    startOnLoad:true,
    htmlLabels:true,
  };
  mermaid.initialize(config);
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="/blog/assets/css/main.css">
    <script src="https://kit.fontawesome.com/f9271f6bdd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="font-mono list-disc bg-gray-700">
    <div class="pt-8 bg-gray-700">
      
        <nav class="flex flex-wrap items-center justify-center px-2 py-4 mb-6">
  <div class="titleImagePosition">
    <a href="/blog/" class="!px-0 !py-0">
      <img class="titleImage" src="/blog/assets/img/title.jpeg" alt="author profile image">
    </a>
  </div>
</nav>

      
      
  
    <div id='sidebar' class='fixed py-16 hidden lg:block'></div>
    <div id='burger-sidebar' class='pt-24 pl-4 fixed hidden md:block'></div>
  

  <div class='prose bg-gray-400' id='article'>
    <div id='word-count' class='pt-4 pl-8 fixed'>words: 80</div>
    <div class='text-center'>
      
    </div>
    <div class='md:px-4 md:grid lg:px-72'>
      <h1 class='text-center mt-6 mb-6'>Json Web Tokens</h1>
      <h2 id="introduction">Introduction</h2>

<p>This article explains the concept of JSON Web Tokens (JWT) and demonstrates their implementation using Ruby on Rails and Vue.js. It covers the process of creating and verifying JWTs, highlighting their role in secure authentication and authorization in distributed systems.</p>

<h2 id="why">Why?</h2>

<p>JWT (JSON Web Token) are used as a secure and compact means of transmitting and verifying claims or information between parties, enabling stateless authentication and authorization in distributed systems.</p>

<h2 id="how">How?</h2>

<h3 id="concept">Concept</h3>

<div class="mermaid">
  graph LR
    user(User) -- email, password --&gt; sign_up_or_login_page[Sign Up or Login Page]
    sign_up_or_login_page[Landing Page] -- email, password --&gt; jwt_service_create[JWT Creation Service]
    jwt_service_create[JWT Creation Service] -- JWT --&gt; user(User)
    user(User) -- JWT --&gt; secured_website(Secured Website)
    secured_website(Secured Website) -- JWT --&gt; jwt_service_validate[JWT Validation Service]
    jwt_service_validate[JWT Validation Service] -- validate? --&gt; secured_website(Secured Website)
    secured_website(Secured Website) -- validate? == yes --&gt; show_page((Show Page))
    secured_website(Secured Website) -- validate? == no --&gt; no_page((No Page))
</div>

<p>In the context of the provided graph, JWT serves as a <strong>secure token</strong> that facilitates the <strong>reliable exchange</strong> of <strong>user information</strong> between two parties involved.</p>
<ul>
  <li>User information: We called it <strong>claims</strong>; for example, the user’s name, ID, roles, or any other relevant data.</li>
  <li>Secure token
    <ul>
      <li>Encoding: The JSON object with user information is encoded with <strong>Base64Url</strong>, resulting in a compact string that allows for easy transmission of the JWT across different systems without data loss.</li>
      <li>Signature: To ensure integrity and <strong>prevent tampering</strong>, a signature is generated by calculating it over the encoded JWT using a shared secret key, and then appending it to the JWT separated by a period.</li>
    </ul>
  </li>
  <li>Reliable Exchange: The JWT is commonly transmitted as a <strong>Bearer Token</strong> in the Authorization header of an HTTP request, prefixed with the word “Bearer” followed by a space, before the actual JWT.</li>
</ul>

<h3 id="pseudocode-of-jwt-in-ruby">Pseudocode of JWT in Ruby</h3>

<h4 id="use-case">Use case</h4>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">'your-secret-key'</span> <span class="c1"># For signature, so that we can prevent any tampering from frontend</span>
<span class="n">jwt_service</span> <span class="o">=</span> <span class="no">JWTService</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">secret_key</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">user_id: </span><span class="mi">123</span><span class="p">,</span> <span class="ss">role: </span><span class="s1">'admin'</span> <span class="p">}</span> <span class="c1"># Claims</span>

<span class="c1"># Encode and sign the JWT token</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">jwt_service</span><span class="p">.</span><span class="nf">encode_jwt</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="c1"># Going to return this token to frontend</span>

<span class="c1"># Decode and verify the JWT token received from frontend</span>
<span class="k">begin</span>
  <span class="n">decoded_payload</span> <span class="o">=</span> <span class="n">jwt_service</span><span class="p">.</span><span class="nf">decode_jwt</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Decoded Payload: </span><span class="si">#{</span><span class="n">decoded_payload</span><span class="si">}</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">StandardError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="s2">"Invalid token: </span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div></div>

<h4 id="service">Service</h4>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'base64'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="k">class</span> <span class="nc">JWTService</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">secret_key</span><span class="p">)</span>
    <span class="vi">@secret_key</span> <span class="o">=</span> <span class="n">secret_key</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">encode_jwt</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
    <span class="n">encoded_payload</span> <span class="o">=</span> <span class="n">base64_url_encode</span><span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">sign_token</span><span class="p">(</span><span class="n">encoded_payload</span><span class="p">)</span> <span class="c1"># Depends on payload and secret key</span>

    <span class="n">data</span> <span class="o">+</span> <span class="s1">'.'</span> <span class="o">+</span> <span class="n">signature</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">decode_jwt</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">token</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)</span>
    <span class="n">encoded_payload</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">payload</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">base64_url_decode</span><span class="p">(</span><span class="n">encoded_payload</span><span class="p">))</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'.'</span> <span class="o">+</span> <span class="n">encoded_payload</span>
    <span class="n">calculated_signature</span> <span class="o">=</span> <span class="n">sign_token</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">calculated_signature</span>
      <span class="n">payload</span>
    <span class="k">else</span>
      <span class="k">raise</span> <span class="s1">'Invalid token: Signature mismatch'</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">base64_url_encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="no">Base64</span><span class="p">.</span><span class="nf">urlsafe_encode64</span><span class="p">(</span><span class="n">data</span><span class="p">).</span><span class="nf">gsub</span><span class="p">(</span><span class="s1">'='</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">base64_url_decode</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span>
    <span class="n">padding_length</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span><span class="n">encoded_data</span><span class="p">.</span><span class="nf">length</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">encoded_data</span> <span class="o">+=</span> <span class="s1">'='</span> <span class="o">*</span> <span class="n">padding_length</span>

    <span class="no">Base64</span><span class="p">.</span><span class="nf">urlsafe_decode64</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">sign_token</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">hmac</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">digest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">),</span> <span class="vi">@secret_key</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">base64_url_encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">)</span>
    <span class="n">signature</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="what">What</h2>

<h3 id="rails--vue">Rails + Vue</h3>

<p>In rails, we usually use the gem, <code class="language-plaintext highlighter-rouge">jwt</code> to do the trick.</p>

<h4 id="rails">Rails</h4>

<h5 id="create-jwt">Create JWT</h5>

<ul>
  <li>Concept: After user input username and password, frontend will post it to backend and if the password is matched, the backend create JWT and return to the frontend.</li>
  <li>Code example
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SessionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">username: </span><span class="n">params</span><span class="p">[</span><span class="ss">:username</span><span class="p">])</span>
  
    <span class="k">if</span> <span class="n">user</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="p">.</span><span class="nf">authenticate</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:password</span><span class="p">])</span>
      <span class="c1"># Generate a JWT token</span>
      <span class="n">token</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span>
        <span class="p">{</span>
          <span class="ss">user_id: </span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
          <span class="c1"># more claims</span>
        <span class="p">},</span>
        <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">secrets</span><span class="p">.</span><span class="nf">secret_key_base</span><span class="p">,</span> <span class="c1"># For signature</span>
        <span class="s1">'HS256'</span>
      <span class="p">)</span>
  
      <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">token: </span><span class="n">token</span> <span class="p">}</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">error: </span><span class="s1">'Invalid credentials'</span> <span class="p">},</span> <span class="ss">status: :unauthorized</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="verify-jwt">Verify JWT</h4>

<ul>
  <li>Concept: Define the method to authorize the JWT in base controller and if we need to protect a method, we write the before_action for that method and the <code class="language-plaintext highlighter-rouge">authorize_request</code> method will do the JWT decode.</li>
  <li>Code Example
    <ul>
      <li>Protected Controller
        <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProtectedController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:authorize_request</span>
    
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">message: </span><span class="s1">'Protected endpoint accessed successfully'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>        </div>
      </li>
      <li>The code to verify JWT in <code class="language-plaintext highlighter-rouge">ApplicationController</code>
        <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">API</span>
  <span class="kp">private</span>
    
  <span class="k">def</span> <span class="nf">authorize_request</span>
    <span class="n">authorization_header</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">authorization_header</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">last</span>
    
    <span class="k">begin</span>
      <span class="n">decoded_token</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span>
        <span class="n">token</span><span class="p">,</span>
        <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">secrets</span><span class="p">.</span><span class="nf">secret_key_base</span><span class="p">,</span>
        <span class="kp">true</span><span class="p">,</span>
        <span class="ss">algorithm: </span><span class="s1">'HS256'</span>
      <span class="p">)</span>
      <span class="n">user_id</span> <span class="o">=</span> <span class="n">decoded_token</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'user_id'</span><span class="p">]</span>
      <span class="vi">@current_user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">id: </span><span class="n">user_id</span><span class="p">)</span>
    <span class="k">rescue</span> <span class="no">JWT</span><span class="o">::</span><span class="no">DecodeError</span><span class="p">,</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">RecordNotFound</span>
      <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">error: </span><span class="s1">'Unauthorized'</span> <span class="p">},</span> <span class="ss">status: :unauthorized</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h4 id="vue">Vue</h4>

<h5 id="get-jwt-when-login">Get JWT when login</h5>

<ul>
  <li>Purpose: After the user input the password and username, we store the JWT from backend in local storage.</li>
  <li>Code example
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">form</span> <span class="p">@</span><span class="nd">submit</span><span class="p">.</span><span class="nx">prevent</span><span class="o">=</span><span class="dl">"</span><span class="s2">handleLogin</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Username</span><span class="dl">"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Password</span><span class="dl">"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Login</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>  
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>
  
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">username</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">password</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nx">handleLogin</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/login</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">username</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
          <span class="na">password</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
        <span class="p">});</span>
  
        <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
        <span class="c1">// Store the token in "local storage" or session storage for later use</span>
  
        <span class="c1">// Redirect the user to a protected route or perform other actions</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="c1">// Handle login error</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div>    </div>
  </li>
</ul>

<h4 id="use-jwt">Use JWT</h4>

<ul>
  <li>Purpose: We create a <code class="language-plaintext highlighter-rouge">api.js</code> as a base to setup JWT for all other protected component. With JWT in header, the controller for this protected component can get JWT and do verification.</li>
  <li>Code example
    <ul>
      <li>base component, <code class="language-plaintext highlighter-rouge">api.js</code>
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>
    
<span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://your-api-url.com</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>
    
<span class="c1">// Add an interceptor to include the JWT token in the request headers</span>
<span class="nx">api</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">config</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">token</span><span class="dl">'</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">common</span><span class="p">[</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">token</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
<span class="p">});</span>
    
<span class="k">export</span> <span class="k">default</span> <span class="nx">api</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
      <li>Protected Component
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Protected</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">button</span> <span class="p">@</span><span class="nd">click</span><span class="o">=</span><span class="dl">"</span><span class="s2">accessProtectedEndpoint</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Access</span> <span class="nx">Protected</span> <span class="nx">Endpoint</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>    
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">api</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./api</span><span class="dl">'</span><span class="p">;</span>
    
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">error</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nx">accessProtectedEndpoint</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/protected</span><span class="dl">'</span><span class="p">);</span>
    
        <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h2 id="reference">Reference</h2>

<p>Myself + ChatGPT</p>

    </div>
  </div>

  <footer class="relative px-4 pt-4 pb-4">
    <!-- footer msg -->
  <div class="flex flex-wrap items-center justify-center">
    <br>
  </div>
</footer>


      <button
        type="button"
        data-mdb-ripple="true"
        data-mdb-ripple-color="light"
        class="scrollTopBtn"
        id="btn-back-to-top"
      >
        <svg aria-hidden="true" focusable="false" data-prefix="fas" class="w-4 h-4" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg>
      </button>
    </div>
  </body>

  <script>
    /* Function for getting the current year in the footer */
    (function () {
      if (document.getElementById("get-current-year")) {
        document.getElementById(
          "get-current-year"
        ).innerHTML = new Date().getFullYear();
      }
    })();
    /* Function for opening navbar on mobile */
    function toggleNavbar(collapseID) {
        document.getElementById(collapseID).classList.toggle("hidden");
        document.getElementById(collapseID).classList.toggle("block");
      }
    /* Function for dropdowns */
    function openDropdown(event, dropdownID) {
      let element = event.target;
      while (element.nodeName !== "A") {
        element = element.parentNode;
      }
      document.getElementById(dropdownID).classList.toggle("hidden");
      document.getElementById(dropdownID).classList.toggle("block");
    }

    // Get the button
    let myButton = document.getElementById("btn-back-to-top");
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
      scrollFunction();
    };
    function scrollFunction() {
      if (
        document.body.scrollTop > 20 ||
        document.documentElement.scrollTop > 20
      ) {
        myButton.style.display = "block";
      } else {
        myButton.style.display = "none";
      }
    }
    // When the user clicks on the button, scroll to the top of the document
    myButton.addEventListener("click", backToTop);
    function backToTop() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>

  <script type="text/javascript" src="/blog/assets/javascript/bundle.js" charset="utf-8"></script>
</html>
