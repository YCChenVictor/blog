<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- 3D drawing -->
    
    <!-- 2D drawing -->
    
    <!-- for mathjax support -->
    
    <!-- mermaid --><meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/blog/assets/css/main.css">
    <script src="https://kit.fontawesome.com/f9271f6bdd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body class="font-mono list-disc">
    <div class="pt-12 pb-4">
      
        <nav class="flex flex-wrap items-center justify-center px-2 mb-6">
  <div class="container px-4 mx-auto flex flex-wrap items-center justify-center">
    <div class="w-full relative flex justify-center">
      <button type="button" onclick="toggleNavbar('navbar')"
        class="rounded-md inline-flex items-center justify-center text-gray-500 md:hidden"
        aria-expanded="false">
        <span class="sr-only">Open menu</span>
        <!-- Heroicon name: outline/menu -->
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <div class="flex hidden md:block" id="navbar">
      <div class="flex flex-col md:flex-row mr-auto w-full">
         <!-- don't show Home in menu for Homepage -->
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/blog/">
          Home
        </a>
        

      <!-- dynamic menu based on navigation info in _config.yml -->
      
         <!-- don't show current page in menu -->
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/blog/about">
          About
        </a>
        
      
         <!-- don't show current page in menu -->
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/blog/category">
          Category
        </a>
        
      
    </div>
    </div>
  </div>
</nav>
        <div id="sidebar" class="p-4 fixed"></div>
      
      <div class="px-4 pt-4 prose prose-indigo">
  <h1 class="text-center mt-6 mb-6">(Rails Elementary) Routes</h1>
  <div class="text-center">
    
  </div>
  <div class="px-72">
    <h2 id="intro">Intro</h2>

<h2 id="why">Why</h2>

<h2 id="how">How</h2>

<p>REST means Representational State Transfer. The benefit of RESTful API is unity. All coders have the consensus to write it in the same form. The direct implementation in rails is to use <code class="language-plaintext highlighter-rouge">resources</code> method as follow:</p>

<p><img src="/assets/img/1_qGzuUl1QZXrzLIrEjFjV1A.png" alt="" /></p>

<p>Then we can use again</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails routes
</code></pre></div></div>

<p>the results: (8 routes related to users)
<img src="/assets/img/1__ZNgXbOxIkg0wSKGXm8aDCw.png" alt="" /></p>

<p>We can use <code class="language-plaintext highlighter-rouge">only</code> or <code class="language-plaintext highlighter-rouge">except</code> to set the only routes we need</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>  
  <span class="n">resources</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:show</span><span class="p">]</span>
  <span class="c1"># or the following codes</span>
  <span class="c1"># resources :products, except: [:new, :create, :edit, :update, :destroy]</span>
<span class="k">end</span>
</code></pre></div></div>

<p>we can use <code class="language-plaintext highlighter-rouge">collection</code> and <code class="language-plaintext highlighter-rouge">member</code> to add sub layer for more manipulation; for example,</p>

<h3 id="collection">collection</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>  
  <span class="n">resources</span> <span class="ss">:orders</span> <span class="k">do</span>  
    <span class="n">collection</span> <span class="k">do</span>  
      <span class="n">get</span> <span class="ss">:cancelled</span>  
    <span class="k">end</span>  
  <span class="k">end</span>  
<span class="k">end</span>
</code></pre></div></div>

<p>Then the routes:
<img src="/assets/img/1_YTaNYTwb6aA41Ukylqj-og.png" alt="" /></p>

<p>There is one more route: <code class="language-plaintext highlighter-rouge">cancelled_orders</code></p>

<h3 id="member">member</h3>

<p>時間不夠，來不及補，跟 collection 的差別是，member 會帶 id，collection 不會</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="ss">member: </span><span class="n">xxx</span><span class="o">/</span><span class="nb">id</span><span class="o">/</span><span class="n">xxx</span>

<span class="ss">collection: </span><span class="n">xxx</span><span class="o">/</span><span class="n">xxx</span>
</code></pre></div></div>

<h3 id="specify-routes-name">specify routes name</h3>

<p>we can specify routes name for administration; for example <code class="language-plaintext highlighter-rouge">asdfadfaew</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>  
  <span class="n">namespace</span> <span class="ss">:admin</span><span class="p">,</span> <span class="ss">path: </span><span class="s2">"asdfadfaew"</span> <span class="k">do</span>  
    <span class="n">resources</span> <span class="ss">:products</span>  
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Then the route path would be as follow:
<img src="/assets/img/1_a0_F4MMPrazMJ8PGeD7CGg.png" alt="" /></p>

<p>There is will be <code class="language-plaintext highlighter-rouge">/asdfadfaew/…</code> routes</p>

<p>After the route, let’s start to explore controller.</p>

<h3 id="the-best-way-to-arrange-routes">the best way to arrange routes</h3>

<p>skip</p>

<h3 id="routes--domain-specific-language-dsl">routes &amp; Domain Specific Language (DSL)</h3>

<p>skip</p>

<h2 id="reference">Reference</h2>

<p><a href="https://railsbook.tw/"><strong>為你自己學 Ruby on Rails 高見龍</strong></a></p>

  </div>
</div>

<footer class="relative px-4 pt-4 pb-4">
  
  <!-- divider -->
  <div class="relative my-8">
    <div class="absolute inset-0 flex items-center" aria-hidden="true">
      <div class="w-full border-t border-gray-200"></div>
    </div>
    <div class="relative flex justify-center ">
      <span class="bg-white px-2 text-gray-200">
        <i class="text-xs far fa-square"></i>
      </span>
    </div>
  </div>

  <!-- footer msg -->
  <div class="flex flex-wrap items-center justify-center">
    <div class="text-sm text-gray-300">
      © <span id="get-current-year"></span>
      
      <a href="" class="!no-underline">
        
      </a>
      
    </div>
  </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/javascripts/bundle.js" charset="utf-8"></script>

    </div>
  </body>

  <script>
    /* Funtion for getting the current year in the footer */
    (function () {
      if (document.getElementById("get-current-year")) {
        document.getElementById(
          "get-current-year"
        ).innerHTML = new Date().getFullYear();
      }
    })();

    /* Function for opning navbar on mobile */
    function toggleNavbar(collapseID) {
        document.getElementById(collapseID).classList.toggle("hidden");
        document.getElementById(collapseID).classList.toggle("block");
      }
      /* Function for dropdowns */
      function openDropdown(event, dropdownID) {
        let element = event.target;
        while (element.nodeName !== "A") {
          element = element.parentNode;
        }
        document.getElementById(dropdownID).classList.toggle("hidden");
        document.getElementById(dropdownID).classList.toggle("block");
      }
  </script>
</html>
