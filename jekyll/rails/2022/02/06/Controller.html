<h2 id="introduction">Introduction</h2>

<p>Controller controls the data flow of an app.</p>

<h2 id="why">Why</h2>

<p>With controller, we can move all the logics to model and only show necessary information on view.</p>

<h2 id="how">How</h2>

<ul>
  <li>corresponds controller with routes</li>
  <li>generate default controller</li>
  <li>generate customized controller</li>
  <li>corresponds method in controller</li>
</ul>

<h3 id="corresponding-routes">Corresponding Routes</h3>

<p>Given in <code class="language-plaintext highlighter-rouge">config/routes.rb</code>,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>  
  <span class="n">get</span> <span class="s2">"/hello_world"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"pages#hello"</span>  
  <span class="n">resources</span> <span class="ss">:posts</span>  
  <span class="n">resources</span> <span class="ss">:users</span>  
<span class="k">end</span>
</code></pre></div></div>

<p>Take a look at <code class="language-plaintext highlighter-rouge">get "/hello_world", to: "pages#hello".</code> This route means if user input the url <code class="language-plaintext highlighter-rouge">"/hello_world",</code> (which is a GET), it will activate method, hello in page controller.</p>

<h3 id="generate-default-controller">generate default controller</h3>

<p>run the following code in terminal</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails g controller pages
</code></pre></div></div>

<p>the creation is as follow
<img src="/assets/img/1__KF3mFWIOzrQ9v7Mt241sAQ.png" alt="" /></p>

<p>Then there would be pages_controller.rb
<img src="/assets/img/1__1GPk5ECjq6b7Fr6FruXmFg.png" alt="" /></p>

<p>As you can see, the convention of naming in rails: <code class="language-plaintext highlighter-rouge">pages_controller.rb</code> matches <code class="language-plaintext highlighter-rouge">PagesControllers</code>.</p>

<h4 id="rollback">rollback</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails destroy controller pages
</code></pre></div></div>

<h3 id="generate-customized-controller">generate customized controller</h3>

<p>generate controller with</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails g controller pages <span class="nt">--no-helper</span> <span class="nt">--no-assets</span> <span class="nt">--no-controller-specs</span> <span class="nt">--no-view-specs</span>
</code></pre></div></div>

<p>or in <code class="language-plaintext highlighter-rouge">application.rb</code>, add</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># turn off assets, helper, view and use rspec while generating controllers</span>
<span class="n">config</span><span class="p">.</span><span class="nf">generators</span><span class="p">.</span><span class="nf">assets</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">config</span><span class="p">.</span><span class="nf">generators</span><span class="p">.</span><span class="nf">helper</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">config</span><span class="p">.</span><span class="nf">generators</span><span class="p">.</span><span class="nf">template_engine</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">config</span><span class="p">.</span><span class="nf">generators</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:rspec</span>
</code></pre></div></div>

<h3 id="corresponding-method-in-controller">Corresponding Method in Controller</h3>

<p>In <code class="language-plaintext highlighter-rouge">app/controllers/pages_controller.rb</code>,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>  
  <span class="k">def</span> <span class="nf">hello</span>  
    <span class="n">render</span> <span class="ss">plain: </span><span class="s2">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span>  
  <span class="k">end</span>  
<span class="k">end</span>
</code></pre></div></div>

<p>Then input the site: http://127.0.0.1:3000/hello_world we can get a website with html: <code class="language-plaintext highlighter-rouge">&lt;h1&gt; Hello World! &lt;/h1&gt;</code></p>

<h2 id="reference">Reference</h2>

<p><a href="https://railsbook.tw/"><strong>為你自己學 Ruby on Rails 高見龍</strong></a></p>
