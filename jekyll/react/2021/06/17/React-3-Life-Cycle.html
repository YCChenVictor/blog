<h2 id="introduction">Introduction</h2>
<p>Please refer to this <a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">website</a> for the diagram of the life cycle. React life cycle:
<img src="/assets/img/react_lifecycle.png" alt="react_lifecycle" />
As you can see, there are three main steps: Mounting (Birth), Updating (Growth), Unmounting (Death) of the components.</p>

<h2 id="why">Why</h2>
<p>The essence of a framework is the life cycle of the components, the series of events from birth to death.</p>

<h2 id="how">How</h2>
<p>I am going to go through all the methods in life cycle. Take the <code class="language-plaintext highlighter-rouge">Clock</code> as example, the following clock class can only show the fixed date and the life cyle method I use is only <code class="language-plaintext highlighter-rouge">render</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Clock extends React.Component {

  render() {
    return (
      &lt;div&gt;
        &lt;h1&gt;Hello, world!&lt;/h1&gt;
        &lt;h2&gt;It is 2021-06-25.&lt;/h2&gt;
      &lt;/div&gt;
    );
  }

}
</code></pre></div></div>
<p>If I want to update current datetime on page refreshing at least, I need constructor for state changing.</p>

<h3 id="constructor">constructor</h3>
<p>constructor is the method to initialize the object’s state in a class, triggered when the creation of an object in a class occurs.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Clock extends React.Component {

  constructor(props) {
    super(props);
    this.state = {date: new Date()};
  }

  render() {
    return (
      &lt;div&gt;
        &lt;h1&gt;Hello, world!&lt;/h1&gt;
        &lt;h2&gt;It is {this.state.date.toLocaleTimeString()}.&lt;/h2&gt;
      &lt;/div&gt;
    );
  }

}

export default Clock;
</code></pre></div></div>
<p>note:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">selectElementById</code> in Vanilla JS = In constructor, <code class="language-plaintext highlighter-rouge">this.inputField = React.createRef()</code> and in html: <code class="language-plaintext highlighter-rouge">&lt;input type="text" ref={this.inputField} /&gt;</code></li>
</ol>

<p>However, the clock above cannot update datetime regularly, we need to use <code class="language-plaintext highlighter-rouge">componentDidMount</code>.</p>

<p>這邊請特別解釋一下如果用 function 的話就不需要特別寫 constructor (看 overview)</p>

<h3 id="componentdidmount">componentDidMount</h3>
<p>The concept of componentDidMount: it will be called as soon as this component mounted.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Clock extends React.Component {

  ...

  componentDidMount() {
    setInterval(
      () =&gt; this.setState({
          date: new Date()
        }),
      1000
    );
  }

  ...

}
</code></pre></div></div>
<p>As you can see, there is a <code class="language-plaintext highlighter-rouge">setState</code> which can modify the state, <code class="language-plaintext highlighter-rouge">date</code> and the <code class="language-plaintext highlighter-rouge">setInterval</code> function tells this component to update state, <code class="language-plaintext highlighter-rouge">date</code> per second.</p>

<p>However, the setInterval will alaways work after the website initialize the <code class="language-plaintext highlighter-rouge">Clock</code>. As a result, we need a method to tell react remove this <code class="language-plaintext highlighter-rouge">setInterval</code> after this component disappear as follow:</p>

<h3 id="componentwillunmount">componentWillUnmount</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Clock extends React.Component {

  ...

  componentDidMount() {
    this.timerID = setInterval(
      () =&gt; this.setState({
          date: new Date()
        }),
      1000
    );
  }

  componentWillUnmount() {
    clearInterval(this.timerID);
  }

  ...

}
</code></pre></div></div>
<p>As you can see, in the <code class="language-plaintext highlighter-rouge">componentWillUnmount</code> step, the process to update date regularly can be cleared.</p>

<h3 id="componentdidupdate">componentDidupdate</h3>
<p>According to the official introduction, this step serves as a verification for component has been updated. For example, we can check whether one second passed on this clock and if not refresh the webpage (or fetch API again to update newest information)</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>componentDidUpdate(prevState) {
  if (this.state.date.toLocaleTimeString() !== prevState.date.toLocaleTimeString() + 1000) {
    window.location.reload();
  }
}
</code></pre></div></div>

<h2 id="the-following-methods-are-uncommon-react-lifecycle-methods">The following methods are Uncommon React Lifecycle Methods</h2>
<h3 id="shouldcomponentupdate">shouldComponentUpdate()</h3>
<h3 id="static-getderivedstatefromprops">static getDerivedStateFromProps()</h3>
<h3 id="getsnapshotbeforeupdate">getSnapshotBeforeUpdate()</h3>

<h2 id="what">What</h2>

<h2 id="reference">Reference</h2>
<p><a href="https://reactjs.org/docs/state-and-lifecycle.html"><strong>State and Lifecycle</strong></a></p>

<p><a href="https://programmingwithmosh.com/javascript/react-lifecycle-methods/"><strong>React Lifecycle Methods – A Deep Dive by Mosh Hamedani</strong></a></p>

<p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"><strong>Life Cycle Diagram</strong></a></p>
