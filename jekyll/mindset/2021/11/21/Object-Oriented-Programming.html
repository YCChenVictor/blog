<h2 id="introduction">Introduction</h2>

<p>I am going to demonstrate the OOP concepts with ruby.</p>

<ol>
  <li>classes: object-oriented style to create objects with these classes</li>
  <li>coupling &amp; cohesion: in OOP, we want low coupling and high cohesion, having a more independent object</li>
  <li>abstraction:</li>
  <li>encapsulation:</li>
  <li>interfaces:</li>
  <li>inheritnace:</li>
  <li>polymorphism: treating an object as a generic version of something; for example, car, truck, and bicycle are versions of vehicle.</li>
  <li>Unified Modeling Language (UML):</li>
</ol>

<h2 id="why">Why</h2>

<p>Because we can have deeper understanding in morden software design.</p>

<h2 id="how--what">How &amp; What</h2>

<h3 id="classes">classes</h3>

<p>We use class to create objects and the class will define the attributes and methods these objects have. For example, a <code class="language-plaintext highlighter-rouge">User</code> class in any SaaS product would be as follow:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="c1"># attributes</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>
  
  <span class="c1"># methods</span>
  <span class="k">def</span> <span class="nf">say_hello</span>
    <span class="nb">puts</span> <span class="s2">"Hello, my name is "</span> <span class="o">+</span> <span class="vi">@name</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">say_hello</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span>
</code></pre></div></div>

<h3 id="coupling--cohesion">coupling &amp; cohesion</h3>

<p>We want less coupling and high cohesion</p>

<h4 id="concept">concept</h4>

<p>If this class is a machine in a company, we want it to be as independent as possible so that once it needs to be replace or suspended for some reason, we can easily do it, increasing the maintainability of this company.</p>

<p>So anything making this machine to be related to other components of this company will increase coupling.</p>

<h4 id="math">math</h4>

\[Coupling(C) = 1 - 1/(d_o + d_i + 2 * (c_o + c_i) + g_d + 2 * g_c + w + r)\]

<ol>
  <li>\(d_o\) = number of output data parameters</li>
  <li>\(d_i\) = number of input data parameters</li>
  <li>\(c_o\) = number of output control parameters</li>
  <li>\(c_i\) = number of input control parameters</li>
  <li>\(g_d\) = number of global variables used as data</li>
  <li>\(g_c\) = number of global variables used as control</li>
  <li>\(w\) = number of modules called (fan-out)</li>
  <li>\(r\) = number of modules calling the module under consideration (fan-in)</li>
</ol>

<h4 id="how-to-decrease-coupling">how to decrease coupling</h4>

<p>skip (to be continued)</p>

<h3 id="abstraction">Abstraction</h3>

<p>Abstraction shows only <strong>essential</strong> attributes; for example, in this world, there are lots of animals such as human, pig, …etc and there are some identical characteristics, then we can first define a class, <code class="language-plaintext highlighter-rouge">Animal</code> and then subdivide it with inheritance rather than writing both classes having the same characteristics.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Animal</span>
  <span class="k">def</span> <span class="nf">initialize</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">eat</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Human</span> <span class="o">&lt;</span> <span class="no">Animal</span>
  <span class="k">def</span> <span class="nf">speak</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Pig</span>
<span class="k">end</span>
</code></pre></div></div>

<p>rather than</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Human</span> <span class="o">&lt;</span> <span class="no">Animal</span>
  <span class="k">def</span> <span class="nf">initialize</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">eat</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">speak</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Pig</span>
  <span class="k">def</span> <span class="nf">initialize</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">eat</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="encapsulation">Encapsulation</h3>

<p>The private methods are example of encapsulation in ruby. You cannot use the methods outside the class. We only show the meaningful methods for outsiders.</p>

<h3 id="interfaces">Interfaces</h3>

<p>An interface implements abstraction and encapsulation throughly, making we only see the appearance of this function and use it easily; for example, we know the light can be on by switching the button but we do not know the logics behind it.</p>

<h3 id="inheritance">Inheritance</h3>

<p>For example, I want to create Animals: Dog, Cat, Bird.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Animal</span>
  <span class="k">def</span> <span class="nf">initialize</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">move</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2"> is moving"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Dog</span> <span class="o">&lt;</span> <span class="no">Animal</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Cat</span> <span class="o">&lt;</span> <span class="no">Animal</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Bird</span> <span class="o">&lt;</span> <span class="no">Animal</span>
<span class="k">end</span>

<span class="n">dog</span> <span class="o">=</span> <span class="no">Dog</span><span class="p">.</span><span class="nf">new</span>
<span class="n">cat</span> <span class="o">=</span> <span class="no">Cat</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bird</span> <span class="o">=</span> <span class="no">Bird</span><span class="p">.</span><span class="nf">new</span>

<span class="n">dog</span><span class="p">.</span><span class="nf">move</span>
<span class="n">cat</span><span class="p">.</span><span class="nf">move</span>
<span class="n">bird</span><span class="p">.</span><span class="nf">move</span>
</code></pre></div></div>

<h3 id="polymorphism">Polymorphism</h3>

<p>For example, I want to create Animals: Dog, Cat, Bird I can write a polymorphic class as follow:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Animal</span>
  <span class="no">DOG</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="no">CAT</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="no">BIRD</span> <span class="o">=</span> <span class="mi">2</span>

  <span class="nb">attr_accessor</span> <span class="ss">:type</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">type</span><span class="p">)</span>
    <span class="vi">@type</span> <span class="o">=</span> <span class="n">type</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">words</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="no">Animal</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">Animal</span><span class="o">.</span><span class="no">DOG</span><span class="p">),</span> <span class="no">Animal</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">Animal</span><span class="o">.</span><span class="no">CAT</span><span class="p">),</span> <span class="no">Animal</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">Animal</span><span class="o">.</span><span class="no">BIRD</span><span class="p">)]</span>

<span class="n">animals</span><span class="p">.</span><span class="nf">each</span> <span class="o">|</span><span class="n">animal</span><span class="o">|</span> <span class="k">do</span>
  <span class="k">case</span> <span class="n">animal</span><span class="p">.</span><span class="nf">type</span>
  <span class="k">when</span> <span class="no">Animal</span><span class="o">.</span><span class="no">DOG</span>
    <span class="n">animal</span><span class="p">.</span><span class="nf">speak</span><span class="p">(</span><span class="s1">'bark'</span><span class="p">)</span>
  <span class="k">when</span> <span class="no">Animal</span><span class="o">.</span><span class="no">CAT</span>
    <span class="n">animal</span><span class="p">.</span><span class="nf">speak</span><span class="p">(</span><span class="s1">'meow'</span><span class="p">)</span>
  <span class="k">when</span> <span class="no">Animal</span><span class="o">.</span><span class="no">BIRD</span>
    <span class="n">animal</span><span class="p">.</span><span class="nf">speak</span><span class="p">(</span><span class="s1">'tweet'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="polymorphism-vs-inheritance">polymorphism vs inheritance</h3>

<p>It depends on the business logic to determine which one to be used. Think about your database. If we use inheritance, then there will be a new model produced which you can create a table associate with it and you will not need runtime to calculate the logics, of which you cost more space but save more time and vice versa.</p>

<p>For example, the same <code class="language-plaintext highlighter-rouge">Dog</code> class. If you are running a zoo, you will not need a table for <code class="language-plaintext highlighter-rouge">Dog</code> and you just need a polymorphism table, <code class="language-plaintext highlighter-rouge">Animal</code>, to list all the animals with type in that table. But if you are running, a store professionally takes good care about dogs, then you need a <code class="language-plaintext highlighter-rouge">Dog</code> model inherited from <code class="language-plaintext highlighter-rouge">Animal</code>.</p>

<h3 id="unified-model-language">Unified Model Language</h3>

<p>It is a language to describe the relationship between models. The relationships: inheritance, composition, aggregation, association, link (solid), dependency, realization, link (dashed)</p>

<div class="mermaid">
classDiagram
  classA --|&gt; classB : Inheritance
  classC --* classD : Composition
  classE --o classF : Aggregation
  classG --&gt; classH : Association
</div>

<div class="mermaid">
classDiagram
  classI -- classJ : Link(Solid)
  classK ..&gt; classL : Dependency
  classM ..|&gt; classN : Realization
  classO .. classP : Link(Dashed)
</div>

<h4 id="inheritance-1">inheritance</h4>

<p>A inherited from B -&gt; A has all attributes and methods from B; for example, student is inherited from person.</p>

<h4 id="composition">composition</h4>

<p>C composed of D -&gt; D is a part of C; for example, car is composed of wheels.</p>

<h4 id="aggregation">aggregation</h4>

<h3 id="reference">Reference</h3>

<p><a href="https://medium.com/launch-school/the-basics-of-oop-ruby-26eaa97d2e98">The Basics of OOP Ruby</a></p>

<p><a href="https://www.youtube.com/watch?v=28vDvuhHA9s">Ruby Tutorial: Abstract Classes</a></p>

<p><a href="https://en.wikipedia.org/wiki/Coupling_(computer_programming)#:~:text=In%20software%20engineering%2C%20coupling%20is,of%20the%20relationships%20between%20modules.">Coupling (computer programming)</a></p>

<p><a href="https://stackoverflow.com/questions/2866987/what-is-the-definition-of-interface-in-object-oriented-programming">What is the definition of “interface” in object oriented programming</a></p>

<p><a href="https://www.youtube.com/watch?v=qqYOYIVrso0">4.7: Introduction to Polymorphism - The Nature of Code</a></p>

<table>
  <tbody>
    <tr>
      <td>[Design Patterns in Plain English</td>
      <td>Mosh Hamedani](https://www.youtube.com/watch?v=NU_1StN5Tkk&amp;t=935s)</td>
    </tr>
  </tbody>
</table>
